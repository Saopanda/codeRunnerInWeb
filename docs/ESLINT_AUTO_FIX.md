# ESLint è‡ªåŠ¨ä¿®å¤å·¥å…·

æœ¬é¡¹ç›®åŒ…å«äº†ä¸€å¥—å®Œæ•´çš„ ESLint è‡ªåŠ¨ä¿®å¤å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿä¿®å¤ä»£ç é£æ ¼å’Œè¯­æ³•é—®é¢˜ã€‚

## å¯ç”¨å‘½ä»¤

### åŸºç¡€ä¿®å¤å‘½ä»¤

```bash
# å¿«é€Ÿä¿®å¤æ‰€æœ‰æ–‡ä»¶ (æ¨è)
pnpm run fix

# ä¿®å¤æŒ‡å®šç›®å½•
pnpm run fix src

# ä»…è¿è¡Œ ESLint è‡ªåŠ¨ä¿®å¤
pnpm run lint:fix

# ESLint ä¿®å¤ + Prettier æ ¼å¼åŒ–
pnpm run lint:fix-all
```

### é«˜çº§ä¿®å¤å‘½ä»¤

```bash
# ä½¿ç”¨é«˜çº§è‡ªåŠ¨ä¿®å¤ç¨‹åº
pnpm run lint:auto-fix

# ä¿®å¤ Git æš‚å­˜æ–‡ä»¶ (é€‚ç”¨äº pre-commit hooks)
pnpm run fix:staged
```

### æ£€æŸ¥å‘½ä»¤

```bash
# æ£€æŸ¥ ESLint é—®é¢˜
pnpm run lint

# æ£€æŸ¥ Prettier æ ¼å¼
pnpm run format:check

# è¿è¡Œ Prettier æ ¼å¼åŒ–
pnpm run format
```

## å·¥å…·è¯´æ˜

### 1. å¿«é€Ÿä¿®å¤å·¥å…· (`quick-fix.js`)

è¿™æ˜¯æœ€å¸¸ç”¨çš„ä¿®å¤å·¥å…·ï¼Œé€‚åˆæ—¥å¸¸å¼€å‘ä½¿ç”¨ã€‚

**ç‰¹ç‚¹:**
- ğŸš€ å¿«é€Ÿæ‰§è¡Œ
- ğŸ“Š ç®€æ´çš„è¿›åº¦æ˜¾ç¤º
- âœ… è‡ªåŠ¨è¿è¡Œ ESLint + Prettier
- ğŸ” ä¿®å¤åè‡ªåŠ¨æ£€æŸ¥å‰©ä½™é—®é¢˜

**ä½¿ç”¨åœºæ™¯:**
- æ—¥å¸¸å¼€å‘ä¸­çš„ä»£ç ä¿®å¤
- æäº¤å‰çš„å¿«é€Ÿæ¸…ç†
- CI/CD æµç¨‹ä¸­çš„ä»£ç æ ¼å¼åŒ–

### 2. é«˜çº§è‡ªåŠ¨ä¿®å¤ç¨‹åº (`eslint-auto-fix.js`)

è¿™æ˜¯åŠŸèƒ½æ›´å®Œæ•´çš„ä¿®å¤å·¥å…·ï¼Œæä¾›è¯¦ç»†çš„æŠ¥å‘Šå’Œçµæ´»çš„é…ç½®ã€‚

**ç‰¹ç‚¹:**
- ğŸ“ˆ è¯¦ç»†çš„ä¿®å¤ç»Ÿè®¡
- ğŸ¯ æ”¯æŒæ–‡ä»¶æ¨¡å¼åŒ¹é…
- âš™ï¸ å¯é…ç½®çš„ä¿®å¤é€‰é¡¹
- ğŸ“‹ å®Œæ•´çš„é”™è¯¯æŠ¥å‘Š

**ä½¿ç”¨åœºæ™¯:**
- å¤§å‹ä»£ç åº“çš„æ‰¹é‡ä¿®å¤
- éœ€è¦è¯¦ç»†æŠ¥å‘Šçš„åœºæ™¯
- è‡ªå®šä¹‰ä¿®å¤æµç¨‹

## ä½¿ç”¨ç¤ºä¾‹

### å¼€å‘è¿‡ç¨‹ä¸­ä¿®å¤ä»£ç 

```bash
# ä¿®å¤å½“å‰æ‰€æœ‰ä»£ç 
pnpm run fix

# åªä¿®å¤ src ç›®å½•
pnpm run fix src
```

### Git æäº¤å‰ä¿®å¤

```bash
# ä¿®å¤æš‚å­˜çš„æ–‡ä»¶
pnpm run fix:staged
```

### é«˜çº§ä½¿ç”¨

```bash
# ä½¿ç”¨é«˜çº§ä¿®å¤å·¥å…·
pnpm run lint:auto-fix

# ä¿®å¤ç‰¹å®šæ–‡ä»¶ç±»å‹
pnpm run lint:auto-fix -f "**/*.ts"

# ä¿®å¤æŒ‡å®šè·¯å¾„
pnpm run lint:auto-fix -p src/components
```

## é…ç½®æ–‡ä»¶

é¡¹ç›®æ ¹ç›®å½•çš„ `.eslint-auto-fix.json` æ–‡ä»¶åŒ…å«äº†è‡ªåŠ¨ä¿®å¤çš„é…ç½®é€‰é¡¹ï¼š

```json
{
  "eslintAutoFix": {
    "defaultTargets": [
      "src/**/*.{js,jsx,ts,tsx}",
      "scripts/**/*.{js,ts}",
      "*.{js,ts}"
    ],
    "excludePatterns": [
      "node_modules/**",
      "dist/**",
      "build/**"
    ],
    "autoFixRules": {
      "enabled": true
    },
    "prettierIntegration": {
      "enabled": true,
      "runAfterEslint": true
    }
  }
}
```

## Git Hooks é›†æˆ

æ‚¨å¯ä»¥å°†ä¿®å¤å‘½ä»¤é›†æˆåˆ° Git hooks ä¸­ï¼š

### Pre-commit Hook

åœ¨ `.git/hooks/pre-commit` ä¸­æ·»åŠ ï¼š

```bash
#!/bin/sh
# ä¿®å¤æš‚å­˜çš„æ–‡ä»¶
pnpm run fix:staged
```

æˆ–è€…ä½¿ç”¨ `husky` å’Œ `lint-staged`ï¼š

```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": [
      "pnpm run fix",
      "git add"
    ]
  }
}
```

## å¸¸è§é—®é¢˜

### Q: ä¿®å¤åä»æœ‰ ESLint é”™è¯¯

A: æœ‰äº› ESLint è§„åˆ™æ— æ³•è‡ªåŠ¨ä¿®å¤ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†ã€‚è¿è¡Œ `pnpm run lint` æŸ¥çœ‹å…·ä½“é—®é¢˜ã€‚

### Q: ä¿®å¤é€Ÿåº¦è¾ƒæ…¢

A: å¯¹äºå¤§å‹é¡¹ç›®ï¼Œå»ºè®®ä½¿ç”¨ `pnpm run fix src` æŒ‡å®šç›®å½•ï¼Œæˆ–ä½¿ç”¨æ–‡ä»¶æ¨¡å¼åŒ¹é…ã€‚

### Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰ä¿®å¤è§„åˆ™

A: ç¼–è¾‘ `.eslint-auto-fix.json` é…ç½®æ–‡ä»¶ï¼Œæˆ–ä¿®æ”¹ `scripts/eslint-auto-fix.js` è„šæœ¬ã€‚

## æœ€ä½³å®è·µ

1. **å¼€å‘æ—¶**: ä½¿ç”¨ `pnpm run fix` è¿›è¡Œå¿«é€Ÿä¿®å¤
2. **æäº¤å‰**: ä½¿ç”¨ `pnpm run fix:staged` ä¿®å¤æš‚å­˜æ–‡ä»¶
3. **CI/CD**: ä½¿ç”¨ `pnpm run lint:fix-all` ç¡®ä¿ä»£ç è´¨é‡
4. **å¤§å‹é‡æ„**: ä½¿ç”¨ `pnpm run lint:auto-fix` è·å–è¯¦ç»†æŠ¥å‘Š

## å·¥å…·è¾“å‡ºç¤ºä¾‹

```bash
$ pnpm run fix

ğŸš€ å¼€å§‹å¿«é€Ÿä¿®å¤...
========================================
ğŸ”§ ESLint è‡ªåŠ¨ä¿®å¤...
âœ… ESLint è‡ªåŠ¨ä¿®å¤ å®Œæˆ
ğŸ”§ Prettier æ ¼å¼åŒ–...
âœ… Prettier æ ¼å¼åŒ– å®Œæˆ

ğŸ“Š æ£€æŸ¥ä¿®å¤ç»“æœ...
ğŸ”§ æ£€æŸ¥å‰©ä½™é—®é¢˜...
âœ… æ£€æŸ¥å‰©ä½™é—®é¢˜ å®Œæˆ

========================================
â±ï¸  ä¿®å¤å®Œæˆï¼Œè€—æ—¶: 1247ms
ğŸ‰ æ‰€æœ‰é—®é¢˜å·²ä¿®å¤ï¼
```

è¿™å¥—å·¥å…·å°†å¸®åŠ©æ‚¨ç»´æŠ¤ä¸€è‡´çš„ä»£ç é£æ ¼ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼